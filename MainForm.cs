/*
 * Сделано в SharpDevelop.
 * Пользователь: SOMOV
 * Дата: 16.11.2014
 * Время: 18:17
 * 
 * Для изменения этого шаблона используйте Сервис | Настройка | Кодирование | Правка стандартных заголовков.
 */
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Windows.Forms;

namespace EncodingText
{
	/// <summary>
	/// Description of MainForm.
	/// </summary>
	public partial class MainForm : Form
	{
		public MainForm()
		{
			//
			// The InitializeComponent() call is required for Windows Forms designer support.
			//
			InitializeComponent();
			
			//
			// TODO: Add constructor code after the InitializeComponent() call.
			//
		}
		
		private String[,] table_ASCII = {{" ","32"},{"!","33"},{"\"","34"},
			{"#","35"},{"$","36"},{"%","37"},{"&","38"},{"'","39"},
			{"(","40"},{")","41"},{"*","42"},{"+","43"},{",","44"},
			{"-","45"},{".","46"},{"/","47"},{"0","48"},{"1","49"},
			{"2","50"},{"3","51"},{"4","52"},{"5","53"},{"6","54"},
			{"7","55"},{"8","56"},{"9","57"},{":","58"},{";","59"},
			{"<","60"},{"=","61"},{">","62"},{"?","63"},{"@","64"},
			{"A","65"},{"B","66"},{"C","67"},{"D","68"},{"E","69"},
			{"F","70"},{"G","71"},{"H","72"},{"I","73"},{"J","74"},
			{"K","75"},{"L","76"},{"M","77"},{"N","78"},{"O","79"},
			{"P","80"},{"Q","81"},{"R","82"},{"S","83"},{"T","84"},
			{"U","85"},{"V","86"},{"W","87"},{"X","88"},{"Y","89"},
			{"Z","90"},{"[","91"},{"\\","92"},{"]","93"},{"^","94"},
			{"_","95"},{"`","96"},{"a","97"},{"b","98"},{"c","99"},
			{"d","100"},{"e","101"},{"f","102"},{"g","103"},{"h","104"},
			{"i","105"},{"j","106"},{"k","107"},{"l","108"},{"m","109"},
			{"n","110"},{"o","111"},{"p","112"},{"q","113"},{"r","114"},
			{"s","115"},{"t","116"},{"u","117"},{"v","118"},{"w","119"},
			{"x","120"},{"y","121"},{"z","122"},{"{","123"},{"|","124"},
			{"}","125"},{"~","126"},{"■","127"},
			{"",""},{"",""},{"",""},{"",""},{"",""}};
		
		
		private String[,] table_MSDOS = {{" ","32"},{"!","33"},{"\"","34"},
			{"#","35"},{"$","36"},{"%","37"},{"&","38"},{"'","39"},
			{"(","40"},{")","41"},{"*","42"},{"+","43"},{",","44"},
			{"-","45"},{".","46"},{"/","47"},{"0","48"},{"1","49"},
			{"2","50"},{"3","51"},{"4","52"},{"5","53"},{"6","54"},
			{"7","55"},{"8","56"},{"9","57"},{":","58"},{";","59"},
			{"<","60"},{"=","61"},{">","62"},{"?","63"},{"@","64"},
			{"A","65"},{"B","66"},{"C","67"},{"D","68"},{"E","69"},
			{"F","70"},{"G","71"},{"H","72"},{"I","73"},{"J","74"},
			{"K","75"},{"L","76"},{"M","77"},{"N","78"},{"O","79"},
			{"P","80"},{"Q","81"},{"R","82"},{"S","83"},{"T","84"},
			{"U","85"},{"V","86"},{"W","87"},{"X","88"},{"Y","89"},
			{"Z","90"},{"[","91"},{"\\","92"},{"]","93"},{"^","94"},
			{"_","95"},{"`","96"},{"a","97"},{"b","98"},{"c","99"},
			{"d","100"},{"e","101"},{"f","102"},{"g","103"},{"h","104"},
			{"i","105"},{"j","106"},{"k","107"},{"l","108"},{"m","109"},
			{"n","110"},{"o","111"},{"p","112"},{"q","113"},{"r","114"},
			{"s","115"},{"t","116"},{"u","117"},{"v","118"},{"w","119"},
			{"x","120"},{"y","121"},{"z","122"},{"{","123"},{"|","124"},
			{"}","125"},{"~","126"},{"■","127"},
			{"А","128"},{"Б","129"},{"В","130"},{"Г","131"},{"Д","132"},
			{"Е","133"},{"Ж","134"},{"З","135"},{"И","136"},{"Й","137"},
			{"К","138"},{"Л","139"},{"М","140"},{"Н","141"},{"О","142"},
			{"П","143"},{"Р","144"},{"С","145"},{"Т","146"},{"У","147"},
			{"Ф","148"},{"Х","149"},{"Ц","150"},{"Ч","151"},{"Ш","152"},
			{"Щ","153"},{"Ъ","154"},{"Ы","155"},{"Ь","156"},{"Э","157"},
			{"Ю","158"},{"Я","159"},{"а","160"},{"б","161"},{"в","162"},
			{"г","163"},{"д","164"},{"е","165"},{"ж","166"},{"з","167"},
			{"и","168"},{"й","169"},{"к","170"},{"л","171"},{"м","172"},
			{"н","173"},{"о","174"},{"п","175"},
			
			{"░","176"},{"▒","177"},{"▓","178"},{"│","179"},{"┤","180"},
			{"╡","181"},{"╢","182"},{"╖","183"},{"╕","184"},{"╣","185"},
			{"║","186"},{"╗","187"},{"╝","188"},{"╜","189"},{"╛","190"},
			{"┐","191"},{"└","192"},{"┴","193"},{"┬","194"},{"├","195"},
			{"─","196"},{"┼","197"},{"╞","198"},{"╟","199"},{"╚","200"},
			{"╔","201"},{"╩","202"},{"╦","203"},{"╠","204"},{"═","205"},
			{"╬","206"},{"╧","207"},{"╨","208"},{"╤","209"},{"╥","210"},
			{"╙","211"},{"╘","212"},{"╒","213"},{"╓","214"},{"╫","215"},
			{"╪","216"},{"┘","217"},{"┌","218"},{"█","219"},{"▄","220"},
			{"▌","221"},{"▐","222"},{"▀","223"},
			{"р","224"},{"с","225"},
			{"т","226"},{"у","227"},{"ф","228"},{"х","229"},{"ц","230"},
			{"ч","231"},{"ш","232"},{"щ","233"},{"ъ","234"},{"ы","235"},
			{"ь","236"},{"э","237"},{"ю","238"},{"я","239"},{"Ё","240"},
			{"ё","241"},{"Є","242"},{"є","243"},{"Ї","244"},{"ї","245"},
			{"Ў","246"},{"ў","247"},{"°","248"},{"∙","249"},{"·","250"},
			{"√","251"},{"№","252"},{"¤","253"},{"■","254"},{" ","255"}};
		
		private String[,] table_Windows1251 = {{" ","32"},{"!","33"},{"\"","34"},
			{"#","35"},{"$","36"},{"%","37"},{"&","38"},{"'","39"},
			{"(","40"},{")","41"},{"*","42"},{"+","43"},{",","44"},
			{"-","45"},{".","46"},{"/","47"},{"0","48"},{"1","49"},
			{"2","50"},{"3","51"},{"4","52"},{"5","53"},{"6","54"},
			{"7","55"},{"8","56"},{"9","57"},{":","58"},{";","59"},
			{"<","60"},{"=","61"},{">","62"},{"?","63"},{"@","64"},
			{"A","65"},{"B","66"},{"C","67"},{"D","68"},{"E","69"},
			{"F","70"},{"G","71"},{"H","72"},{"I","73"},{"J","74"},
			{"K","75"},{"L","76"},{"M","77"},{"N","78"},{"O","79"},
			{"P","80"},{"Q","81"},{"R","82"},{"S","83"},{"T","84"},
			{"U","85"},{"V","86"},{"W","87"},{"X","88"},{"Y","89"},
			{"Z","90"},{"[","91"},{"\\","92"},{"]","93"},{"^","94"},
			{"_","95"},{"`","96"},{"a","97"},{"b","98"},{"c","99"},
			{"d","100"},{"e","101"},{"f","102"},{"g","103"},{"h","104"},
			{"i","105"},{"j","106"},{"k","107"},{"l","108"},{"m","109"},
			{"n","110"},{"o","111"},{"p","112"},{"q","113"},{"r","114"},
			{"s","115"},{"t","116"},{"u","117"},{"v","118"},{"w","119"},
			{"x","120"},{"y","121"},{"z","122"},{"{","123"},{"|","124"},
			{"}","125"},{"~","126"},{"■","127"},
			{"",""},{"",""},{"",""},{"",""},{"",""}};
		
		
		void MainFormLoad(object sender, EventArgs e)
		{
			
		}
		
		
		void ВыходToolStripMenuItemClick(object sender, EventArgs e)
		{
			Application.Exit();
		}
		
		/* ВЫПОЛНЕНИЕ КОДИРОВАНИЯ ================================= */
		// Определяем числовое представление символов
		bool GetCodingChars(String typeCoding)
		{
			if(typeCoding == "ASCII"){
				for(int i = 0; i < richTextBox1.Text.Length; i++)
					for(int iascii = 0; iascii < (table_ASCII.Length / 2); iascii++)
						if(richTextBox1.Text[i].ToString() == table_ASCII[iascii,0])
							richTextBox3.Text += table_ASCII[iascii,1] + " ";
			}
			if(typeCoding == "MS-DOS"){
				for(int i = 0; i < richTextBox1.Text.Length; i++)
					for(int imsdos = 0; imsdos < (table_MSDOS.Length / 2); imsdos++)
						if(richTextBox1.Text[i].ToString() == table_MSDOS[imsdos,0])
							richTextBox3.Text += table_MSDOS[imsdos,1] + " ";
			}
			if(typeCoding == "Windows-1251"){
				for(int i = 0; i < richTextBox1.Text.Length; i++)
					for(int iwin = 0; iwin < (table_Windows1251.Length / 2); iwin++)
						if(richTextBox1.Text[i].ToString() == table_Windows1251[iwin,0])
							richTextBox3.Text += table_Windows1251[iwin,1] + " ";
			}
			return true;
		}
	
		bool PerformCoding(String typeCoding)
		{
			String sChar = "";
			if(typeCoding == "MS-DOS"){
				for(int i = 0; i < richTextBox3.Text.Length; i++){
					if(richTextBox3.Text[i].ToString() == " "){
						
						for(int imsdos = 0; imsdos < (table_MSDOS.Length / 2); imsdos++){
							if(sChar == table_MSDOS[imsdos,1]){
								richTextBox2.Text += table_MSDOS[imsdos,0];
								break;
							}
						}
						sChar = "";
						
					}else{
						sChar += richTextBox3.Text[i].ToString();
					}
				}
			}
			
			
			return true;
		}
		
		void ToolStripButton1Click(object sender, EventArgs e)
		{
			richTextBox2.Clear();
			richTextBox3.Clear();
			
			if(GetCodingChars(toolStripComboBox1.Text))
				if(PerformCoding(toolStripComboBox2.Text))
					MessageBox.Show("Готово!");
			
			
		}
	}
}
